// Initialize AOS animations
AOS.init({
  duration: 1000,
  once: true,
  offset: 100
});

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Navbar background on scroll
window.addEventListener('scroll', function() {
  const header = document.getElementById('header');
  if (window.scrollY > 100) {
    header.style.background = 'rgba(255, 255, 255, 0.95)';
    header.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
  } else {
    header.style.background = 'transparent';
    header.style.boxShadow = 'none';
  }
});

// Mobile navigation toggle
const navBtn = document.getElementById('nav-btn');
const navBtnImg = document.getElementById('nav-btn-img');
const nav = document.getElementById('nav');

if (navBtn && nav) {
  navBtn.addEventListener('click', function() {
    nav.classList.toggle('nav-open');
    if (nav.classList.contains('nav-open')) {
      navBtnImg.src = 'img/icons/close.svg';
    } else {
      navBtnImg.src = 'img/icons/open.svg';
    }
  });
}

// Active navigation link highlighting
const sections = document.querySelectorAll('section');
const navLinks = document.querySelectorAll('.nav-link');

window.addEventListener('scroll', function() {
  let current = '';
  sections.forEach(section => {
    const sectionTop = section.offsetTop;
    const sectionHeight = section.clientHeight;
    if (scrollY >= (sectionTop - 200)) {
      current = section.getAttribute('id');
    }
  });

  navLinks.forEach(link => {
    link.classList.remove('active');
    if (link.getAttribute('href') === `#${current}`) {
      link.classList.add('active');
    }
  });
});

// Form submission handling
const contactForm = document.querySelector('.contactForm');
const responseDiv = document.querySelector('.response');

if (contactForm) {
  contactForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    // Get form data
    const formData = new FormData(contactForm);
    const name = formData.get('name');
    const email = formData.get('email');
    const message = formData.get('message');
    
    // Simple validation
    if (!name || !email || !message) {
      showResponse('Please fill in all fields.', 'error');
      return;
    }
    
    // Simulate form submission
    showResponse('Thank you for your message! I will get back to you soon.', 'success');
    contactForm.reset();
  });
}

function showResponse(message, type) {
  if (responseDiv) {
    responseDiv.textContent = message;
    responseDiv.className = 'response';
    responseDiv.classList.add(type);
    
    setTimeout(() => {
      responseDiv.textContent = '';
      responseDiv.className = 'response';
    }, 5000);
  }
}

// Skill bar animation
const skillBars = document.querySelectorAll('.skill-bar__fill');

const animateSkillBars = () => {
  skillBars.forEach(bar => {
    const progress = bar.getAttribute('data-progress');
    bar.style.width = '0%';
    
    setTimeout(() => {
      bar.style.width = progress + '%';
    }, 500);
  });
};

// Animate skill bars when they come into view
const skillSection = document.querySelector('.about-skills');
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      animateSkillBars();
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.5 });

if (skillSection) {
  observer.observe(skillSection);
}

// Back to top button
const goToTop = document.getElementById('goToTop');

window.addEventListener('scroll', function() {
  if (window.scrollY > 500) {
    goToTop.style.display = 'block';
  } else {
    goToTop.style.display = 'none';
  }
});

// Loading animation
window.addEventListener('load', function() {
  document.body.classList.add('loaded');
});